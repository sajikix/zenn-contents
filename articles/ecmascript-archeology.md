---
title: "EcmaScript考古学をするときに"
emoji: "📜"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["JavaScript", "frontend"]
publication_name: "cybozu_frontend"
published: false
---

## はじめに

この記事は著者が `Intl` の仕様策定経緯を調べている中で得た、「EcmaScript における特定の仕様の策定経緯を(かなり)遡って調べる方法」を共有するものです。あくまで調べるときに参照すると良い資料の紹介と探し方の一例なので仕様や年代によってはこの方法が使えない場合もあります。

## 仕様を調べるとプロセスが気になってくる

EcmaScript の仕様を調べると時折「何でこの仕様は入ったんだろう」とか「採用されるまでにどういった議論がなされたんだろう」といったことが気になる時があります。新しい仕様の策定や stage 変更は必ず ECMAScript の仕様策定している TC39 のミーティングを経て行われていますから、基本的にミーティング議事録を漁れば上記のような「モチベーション」や「策定までの議論」を見つけることができます。

## 近年のミーティング agenda と議事録

TC39 のミーティングアジェンダと議事録はそれぞれ次の github のリポジトリにまとまっています。

- アジェンダ : https://github.com/tc39/agendas
- 議事録 : https://github.com/tc39/notes/tree/main/meetings

歴史的経緯[^1]からアジェンダと議事録が別のリポジトリになっていますが、基本的にはアジェンダから議題をチェックしてそれを元に議事録で該当する仕様を探すことになります。また探したい仕様の名前がわかっていれば全体検索で検索することももちろんできます。ただし Proposal の名前や API が策定の途中で変更になることはよくあるので検索の際は注意が必要です。

また ECMA402(Intl) に関しては現在仕様策定のグループが分かれており、 ECMA402 だけのミーティングが開催されています。Intl について追う場合は合わせて以下のリポジトリにある議事録を参照すると良いでしょう。

- ECMA402 の meeting 議事録 : https://github.com/tc39/ecma402/tree/master/meetings

また仕様に関する議論は仕様書があるリポジトリの issues を通じてある程度開かれて議論されているので、issue を探すのも良いでしょう。

- ECMA262 issue : https://github.com/tc39/ecma262/issues
- ECMA402 issue : https://github.com/tc39/ecma402/issues

## 「近年」の議事録はある。でもそれより前は...

このように github にまとまっている議事録や議論は比較的簡単に追うことができますが、一定以上前の議事録は github にまとまっていません。具体的には TC39 全体のミーティング議事録は 2012 年から、Intl のミーティング議事録は 2017 年から github 上に残されています。

2012 年以前と聞くと「もう 10 年以上前の議事録なんて」と思われるかもしれませんが、仕様の策定に年単位の時間がかかることを鑑みると無視できない場合もあります。

実際に 2012 年前後の状況を振り返ると以下のような時期だったようです。

- ES5.1 のリリースが 2011 年の終わり
- 後の ES6 となる ES Harmony の仕様の一部は策定が始まっている

このことから ES5.1 というマイナーバージョンを出すことになった経緯はもちろんのこと、現在においてデファクトとなった「ES6 で追加された構文」についても多くが 2012 以前から議論されていたことになります。また Intl のような近年各環境でのサポートが揃いつつあるような仕様も最初に提案されたのは 2010 年だったりします。

このように「今当たり前になった構文」の策定までを追おうとすると 2012 年までの議事録では足りないケースが出てくるのです。

## 2012 年以前の EcmaScript 仕様策定を追う

では 2012 年以前の議事録やそれに付随する議論はどうやって追えばいいのでしょうか？

今現在参照できる資料として一番確実なのは ECMAInternational が年ごとに議事録や提案書などを集めている ECMAScript Archives というページを参照することです。この ECMAScript Archives では初版発行前年である 1996 年から 2015 年までの資料がまとめられています。

https://ecma-international.org/ecmascript-development-archive/

このページにあるリンクから各年の資料がまとまるページへいくことができます。このページたちでまとまっている資料は大きく 3 つに分類されています。

- Ecma General Assembly Documents : Ecma 総会の議事録で EcmaScript に関する部分だけがアーカイブされている。
- TC39 Documents : TC39 　 meeting のアジェンダや議事録 meeting で利用された提案書、draft 仕様書並びにそのレビューなどが含まれる。
- それ以外の文書 : 初期に多くあった非公式のワーキンググループや Ecma アーカイブに収録されていないメモ・提案書・wiki・メーリングリストなどがまとまっている。

仕様策定の流れを追う場合、TC39 Documents の中から探すことが多いでしょう。具体的には以下のように探すと良いです。

- タイトルから調べたい仕様の提案書と思われる資料を探す。
  - 例えば Intl の提案書は [2010 年のページ](https://ecma-international.org/ecmascript-development-archive/2010-ecmascript-archives/)に「Google proposal for ECMAScript internationalization library Standard」というタイトルで記載されています。
- ミーティングのアジェンダ(`Agenda for the Nth meeting of TC39` というタイトルのもの)を見て調べたい仕様が話される回を探し、そのアジェンダに対応する議事録(`Minutes of the Nth meeting of TC39` というタイトルのもの)を読む。
  - 提案書が見つかった場合は当たり前ですがその前後の meeting で議題に上がっているはずです。

また TC39 Documents 以外にも非公式の議事録メモや資料が多くまとまっています。上記の方法で提案された時期や当時の名称などを把握してから、関連する文書があるかざっと目を通してみると良いでしょう。

meeting の議事録だけだと「当時どんな API 案が出されていたのか」や「どんな議論が行われていたか」が読み取りづらいこともあります。そのため年代によっては合わせて以下のようなアーカイブを参照すると解像度が上がりそうです。(2007 年以前などになるとこのような資料もないことがあります。)

- wiki.ecmascript.org のアーカイブ : https://web.archive.org/web/20161123164855/http://wiki.ecmascript.org/doku.php
  - wiki.ecmascript.org は新し仕様策定作業を行う上で利用されていた wiki です。(現在は[web.archive.org](https://web.archive.org/)のアーカイブになっています。)この wiki には、その仕様の概要はもちろんのこと、モチベーションや当時の状況、想定していた API などが記されています。アーカイブされているタイミングは限定的なので変化を追うのには向いていませんがそれでも役に立つ資料群です。
  - ちなみにこの wiki には現在の ES6 となった ES harmony に関して専用の階層が用意されているので、特に調べたい仕様がない人でも見てみると面白いかもしれません。
    - https://web.archive.org/web/20161129235606/http://wiki.ecmascript.org/doku.php?id=harmony:harmony
- es-discuss のアーカイブ : https://esdiscuss.org/
  - es-discuss は当時議論の場として機能していたメーリングリストで、このページはそのアーカイブとなります。自分の調べたい仕様と関連がありそうな topic を見つけることができれば当時どのような議論されていたかをみることができます。

## おわりに

このように github 上に当時のミーティング議事録や議論の様子が残っていない仕様策定の議論についても ECMAScript Archives やそれに関する資料・アーカイブを活用するとある程度調べることができます。

今回 10 年以上前の議論を遡って調べる中で後世の人がちゃんと仕様やその議論を終えるように資料をまとめてくれていること、github でまとまって誰でもアクセスしやすい形で仕様策定を行なっている現状の体制にありがたさを感じることとなりました。

[^1]: 議事録のリポジトリはもともと参加者の一人が個人的にまとめていたリポジトリを移行したものだからのようです。
