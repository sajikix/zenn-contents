---
title: "Intl.ListFormat(#18)"
emoji: "ğŸ§¾"
type: "tech"
topics: ["Intl", "i18n", "frontend"]
published: false
---

ã“ã®è¨˜äº‹ã¯ã€Œ[1 äºº Intl Advent Calendar 2024](https://adventar.org/calendars/10555)ã€ã® 18 æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚

ä»Šå›ã¯ãƒªã‚¹ãƒˆã®è¡¨è¨˜ã‚’ãƒ­ã‚±ãƒ¼ãƒ«ã«åˆã‚ã›ã¦æ›¸å¼åŒ–ã—ã¦ãã‚Œã‚‹ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚

## `Intl.ListFormat`

### ãƒªã‚¹ãƒˆè¡¨è¨˜ã¨ã¯

ãƒªã‚¹ãƒˆè¡¨è¨˜ã¨ã¯è‹±èªã§è¨€ã† `A, B and C` ã®ã‚ˆã†ã«ã‚‚ã®ã‚’åˆ—æŒ™ã™ã‚‹éš›ã®è¡¨è¨˜æ–¹æ³•ã§ã™ã€‚ã“ã®ã‚ˆã†ãªåˆ—æŒ™ã™ã‚‹è¡¨è¨˜ã¯è¨€èªã«ã‚ˆã£ã¦ç•°ãªã‚Šã€æ—¥æœ¬èªã§ã¯ `Aã€Bã€C` ã®ã‚ˆã†ã«ã€ã‚«ãƒ³ãƒã®ä»£ã‚ã‚Šã«èª­ç‚¹ã‚’ä½¿ã†ã“ã¨ãŒä¸€èˆ¬çš„ã§ã™ã€‚è‹±èªã§ã¯ `A, B, and C` ã®ã‚ˆã†ã«ã€æœ€å¾Œã®è¦ç´ ã®å‰ã« `and / or` ã‚’å…¥ã‚Œã‚‹ã“ã¨ãŒä¸€èˆ¬çš„ã§ã™ã€‚

ã“ã®ã‚ˆã†ãªãƒªã‚¹ãƒˆè¡¨è¨˜ã¯è¨€èªã‚„ãƒ­ã‚±ãƒ¼ãƒ«ã«ã‚ˆã£ã¦ç•°ãªã‚‹æ–‡æ³•è¦å‰‡ã‚’æŒã¤ãŸã‚ã€ã“ã‚Œã‚’è‡ªå‰ã§åˆ¤åˆ¥ãƒ»æ›¸å¼åŒ–ã™ã‚‹ã®ã¯å¤§å¤‰ã§ã™ã€‚

### Intl.ListFormat ã®åŸºæœ¬çš„ãªä½¿ã„æ–¹

Intl.ListFormat ã¯ã€ã“ã®ã‚ˆã†ãªãƒªã‚¹ãƒˆã®è¡¨è¨˜ã‚’ãƒ­ã‚±ãƒ¼ãƒ«ã«åˆã‚ã›ã¦æ›¸å¼åŒ–ã—ã¦ãã‚Œã‚‹ Intl ã® API ã§ã™ã€‚

ä»–ã® Intl ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åŒæ§˜ã€ç¬¬ï¼‘å¼•æ•°ã«ãƒ­ã‚±ãƒ¼ãƒ«(ãƒ­ã‚±ãƒ¼ãƒ«è­˜åˆ¥å­ or Intl.Locale ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ)ã‚’ç¬¬ï¼’å¼•æ•°ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æ¸¡ã—ã¦åˆæœŸåŒ–ã™ã‚‹ã“ã¨ã§ã€Intl.ListFormat ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã§ãã¾ã™ã€‚

```ts
const enFormatter = new Intl.ListFormat("en-US", {
  // ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®š
});
const jaFormatter = new Intl.ListFormat("ja-JP", {
  // ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®š
});
```

ç”Ÿæˆã—ãŸ Intl.ListFormat ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¯ `format()` / `formatToParts()` ã®ã‚ˆã†ãªãƒ¡ã‚½ãƒƒãƒ‰ãŒç”Ÿãˆã¦ãŠã‚Š(è©³ã—ãã¯è¨˜è¿°)ã€ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã«é…åˆ—ãªã©ã®åå¾©å¯èƒ½ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã™ã“ã¨ã§ã€ãƒªã‚¹ãƒˆè¡¨è¨˜ã‚’ãƒ­ã‚±ãƒ¼ãƒ«ã«åˆã‚ã›ã¦æ›¸å¼åŒ–ã—ã¦ãã‚Œã¾ã™ã€‚

```ts
enFormatter.format(["Train", "Bus", "Car"]); // "Train, Bus, and Car"
```

### ãƒ¡ã‚½ãƒƒãƒ‰

Intl.ListFormat ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã¯ä»¥ä¸‹ã® 3 ã¤ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚ã‚Šã¾ã™ã€‚

- `format()`
- `formatToParts()`
- `resolvedOptions()`(ä»–ã¨åŒæ§˜ãªã®ã§çœç•¥)

#### `format()`

`format()` ãƒ¡ã‚½ãƒƒãƒ‰ã¯é…åˆ—ãªã©ã®åå¾©å¯èƒ½ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã™ã“ã¨ã§ã€ãƒªã‚¹ãƒˆè¡¨è¨˜ã‚’ãƒ­ã‚±ãƒ¼ãƒ«ã«åˆã‚ã›ã¦æ›¸å¼åŒ–ã—ãŸæ–‡å­—åˆ—ã‚’è¿”ã™ãƒ¡ã‚½ãƒƒãƒ‰ã§ã™ã€‚

```ts
new Intl.ListFormat("en-US").format(["Train", "Bus", "Car"]);
// "Train, Bus, and Car"
```

ãã®ãŸã‚å¼•æ•°ã‚’çœç•¥ã—ãŸã‚Šã€åå¾©å¯èƒ½ã§ãªã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã™ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚

```ts
// Not iterable error
new Intl.ListFormat("en-US").format(true);
new Intl.ListFormat("en-US").format(3);
```

#### `formatToParts()`

`formatToParts()` ãƒ¡ã‚½ãƒƒãƒ‰ã¯ `format()` ãƒ¡ã‚½ãƒƒãƒ‰ã¨ç•°ãªã‚Šã€è¿”ã‚Šå€¤ã‚’æ›¸å¼åŒ–ã•ã‚ŒãŸæ–‡å­—åˆ—ã§ã¯ãªãæ–‡å­—åˆ—ã‚’æ§‹æˆã™ã‚‹éƒ¨å“ã®é…åˆ—ã§è¿”ã—ã¾ã™ã€‚é…åˆ—ã®å„è¦ç´ ã¯ `{type: string, value: string}` ã¨ã„ã†ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã€`type` ã«ã¯è¦ç´ ã®ç¨®åˆ¥ã€`value` ã«ã¯å®Ÿéš›ã®æ–‡å­—åˆ—ãŒå…¥ã‚Šã¾ã™ã€‚`type` ã«ã¯ `"element"` ã¨ `"literal"` ãŒã‚ã‚Šã€`"element"` ã¯ãƒªã‚¹ãƒˆã®è¦ç´ ã€`"literal"` ã¯åŒºåˆ‡ã‚Šæ–‡å­—éƒ¨åˆ†ã‚’è¡¨ã—ã¾ã™ã€‚

```ts
new Intl.ListFormat("en-US").formatToParts(["Train", "Bus", "Car"]);
// [
//   { type: "element", value: "Train" },
//   { type: "literal", value: ", " },
//   { type: "element", value: "Bus" },
//   { type: "literal", value: ", and " },
//   { type: "element", value: "Car" },
// ];
```

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³

Intl.ListFormat ã®åˆæœŸåŒ–ã§æŒ‡å®šã§ãã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®ï¼’ã¤ã§ã™ã€‚(å…¨ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å…±é€šã® `localeMatcher` ã‚’é™¤ã)ã€‚

- `type` : ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã®ç¨®é¡
- `style` : ãƒªã‚¹ãƒˆè¡¨è¨˜ã®è¦‹ãŸç›®

#### `type` ã‚ªãƒ—ã‚·ãƒ§ãƒ³

`type` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã™ã‚‹æ™‚ã®ç¨®é¡ã‚’æŒ‡å®šã™ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™ã€‚ä»¥ä¸‹ã® 3 ã¤ã®å€¤ãŒæŒ‡å®šã§ãã¾ã™ã€‚

- `"conjunction"` : ãƒªã‚¹ãƒˆã®è¦ç´ ã‚’ and ã§ç¹‹ã(ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ)
- `"disjunction"` : ãƒªã‚¹ãƒˆã®è¦ç´ ã‚’ or ã§ç¹‹ã
- `"unit"` : and ã‚„ or ã§ã¯ãªãåŒºåˆ‡ã‚Šæ–‡å­—ã ã‘ã§ç¹‹ã

```ts
new Intl.ListFormat("en-US").format(["Train", "Bus", "Car"]);
// "Train, Bus, and Car"
new Intl.ListFormat("en-US", { type: "disjunction" }).format([
  "Train",
  "Bus",
  "Car",
]); // "Train, Bus, or Car"
new Intl.ListFormat("en-US", { type: "unit" }).format(["Train", "Bus", "Car"]); // "Train, Bus, Car"
```

æ—¥æœ¬èªãªã©ã§ã¯ã‚ã¾ã‚Šé–¢ä¿‚ãªã„ã§ã™ãŒã€è‹±èªãªã©ã§ã¯ and ã‹ or ã‹ã‚’æŒ‡å®šã§ãã‚‹ã¨ä¾¿åˆ©ã§ã™ã€‚

#### `style` ã‚ªãƒ—ã‚·ãƒ§ãƒ³

`style` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ãƒªã‚¹ãƒˆè¡¨è¨˜ã®è¦‹ãŸç›®ã‚’æŒ‡å®šã™ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™ã€‚ä»¥ä¸‹ã® 3 ã¤ã®å€¤ãŒæŒ‡å®šã§ãã¾ã™ã€‚

- `"long"` : and ã‚„ or ãªã©ã‚’çœç•¥ã—ãªã„(ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ)
- `"short"` : åŒºåˆ‡ã‚Šæ–‡å­—ã ã‘ã§ç¹‹ã
- `"narrow"` : ç©ºç™½ã ã‘ã§ç¹‹ã

```ts
new Intl.ListFormat("en-US").format(["Train", "Bus", "Car"]);
// "Train, Bus, and Car"
new Intl.ListFormat("en-US", { style: "short" }).format([
  "Train",
  "Bus",
  "Car",
]); // "Train, Bus, Car"
new Intl.ListFormat("en-US", { style: "narrow" }).format([
  "Train",
  "Bus",
  "Car",
]); // "Train Bus Car"
```

### ç°¡å˜ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹

Intl.ListFormat ã¯ç‰¹ã«è¦ç´ æ•°ã®ç¢ºå®šã—ã¦ã„ãªã„è¦ç´ ã‚’æ›¸å¼åŒ–ã™ã‚‹æ™‚ã«ä¾¿åˆ©ã§ã™ã€‚

è‹±èªã§ã®ãƒªã‚¹ãƒˆæ›¸å¼åŒ–ã‚’è‡ªå‰ã§å®Ÿè£…ã™ã‚‹å ´åˆä»¥ä¸‹ã®ã‚ˆã†ã«è¦ç´ ã®é †ç•ªã«å¿œã˜ãŸç´°ã‹ã„å‡¦ç†ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚

```ts
const formatEnList = (items: string[]) => {
  items
    .map((item, index) => {
      if (index === 0) {
        return item; // æœ€åˆã®è¦ç´ ã¯ãã®ã¾ã¾
      } else if (index === items.length - 1) {
        return ` and ${item}`; // æœ€å¾Œã®è¦ç´ ã¯ and ã‚’ã¤ã‘ã‚‹
      } else {
        return `, ${item}`; // ãã‚Œä»¥å¤–ã¯ã‚«ãƒ³ãƒã‚’ã¤ã‘ã‚‹
      }
    })
    .join("");
};
```

ã“ã‚Œã‚‰ã®å‡¦ç†ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹è¨€èªã”ã¨ã«å®Ÿè£…ã™ã‚‹ã®ã¯å¤§å¤‰ã§ã™ãŒã€Intl.ListFormat ã‚’ä½¿ã†ã“ã¨ã§ãƒ­ã‚±ãƒ¼ãƒ«ã«åˆã‚ã›ãŸãƒªã‚¹ãƒˆè¡¨è¨˜ã‚’ç°¡å˜ã«å®Ÿç¾ã§ãã¾ã™ã€‚

```ts
const listFormatter = new Intl.ListFormat("en");
const message = `${listFormatter.format([
  "Cash",
  "credit card",
  "various payment",
])} are available for payment`;
// "Cash, credit card and various payment apps are available for payment."
```

ã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¾‹ã§è¨€ãˆã°ã€ä»Šå¾Œæ”¯æ‰•ã„æ–¹æ³•ãŒå¢—æ¸›ã—ãŸå ´åˆã§ã‚‚ã€é…åˆ—ã«è¦ç´ ã‚’è¿½åŠ ã™ã‚‹ã ã‘ã§è‡ªç„¶ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç”Ÿæˆã§ãã¾ã™ã€‚

## ã¾ã¨ã‚ã¨æ¬¡å›äºˆå‘Š

ã“ã®è¨˜äº‹ã§ã¯ãƒªã‚¹ãƒˆè¡¨è¨˜ã®æ›¸å¼åŒ–ã‚’è¡Œã† `Intl.ListFormat` ã«ã¤ã„ã¦åŸºæœ¬çš„ãªä½¿ã„æ–¹ã€API ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã—ãŸã€‚

æ¬¡å›[19 æ—¥ç›®]()ã¯è¨€èªã‚’è€ƒæ…®ã—ãŸæ–‡å­—åˆ—ã®æ¯”è¼ƒã‚’å¯èƒ½ã«ã™ã‚‹ `Intl.Collator` ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚ãŠæ¥½ã—ã¿ã«ï¼
